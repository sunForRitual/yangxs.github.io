<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>(人 •͈ᴗ•͈) ♡♡</title>
        <subtitle></subtitle>
        <icon>https://sunforritual.github.io/yangxs.github.io/images/favicon.ico</icon>
        <link>https://sunforritual.github.io/yangxs.github.io</link>
        <author>
          <name>yangxs</name>
        </author>
        <description></description>
        <language>zh-CN</language>
        <pubDate>Fri, 01 Mar 2024 16:26:39 +0800</pubDate>
        <lastBuildDate>Fri, 01 Mar 2024 16:26:39 +0800</lastBuildDate>
        <category term="python" />
        <category term="爬虫" />
        <category term="JS逆向" />
        <item>
            <guid isPermalink="true">https://sunforritual.github.io/yangxs.github.io/2024/03/01/spider/Xpath%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/</guid>
            <title>xpath 高级用法</title>
            <link>https://sunforritual.github.io/yangxs.github.io/2024/03/01/spider/Xpath%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/</link>
            <category term="spider" scheme="https://sunforritual.github.io/yangxs.github.io/categories/spider/" />
            <pubDate>Fri, 01 Mar 2024 16:26:39 +0800</pubDate>
            <description><![CDATA[ &lt;h3 id=&#34;xpath-高级用法&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#xpath-高级用法&#34;&gt;#&lt;/a&gt; xpath 高级用法&lt;/h3&gt;
&lt;h4 id=&#34;1-匹配当前节点下的所有&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#1-匹配当前节点下的所有&#34;&gt;#&lt;/a&gt; 1. 匹配当前节点下的所有： .//&lt;/h4&gt;
&lt;p&gt;. 表示当前&lt;/p&gt;
&lt;p&gt;// 表示当前标签下的所有标签&lt;/p&gt;
&lt;p&gt;注： 要配合使用&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;2-匹配某标签的属性值-属性名称&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#2-匹配某标签的属性值-属性名称&#34;&gt;#&lt;/a&gt; 2. 匹配某标签的属性值： /@属性名称&lt;/h4&gt;
&lt;p&gt;这里以 input 里的 value 值为例：&lt;/p&gt;
&lt;p&gt;例：xpath (//input/@value)&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;3-匹配多个路径&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#3-匹配多个路径&#34;&gt;#&lt;/a&gt; 3. 匹配多个路径：|&lt;/h4&gt;
&lt;p&gt;在一个 xpath 中写的多个表达式用 | 分开， 每个表达式互不干扰。&lt;/p&gt;
&lt;p&gt;例：xpath (&amp;quot;//tr [6]/td [2]/text () | //tr [7]/td [2]/text ()&amp;quot;)&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;4按属性匹配&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#4按属性匹配&#34;&gt;#&lt;/a&gt; 4. 按属性匹配：@&lt;/h4&gt;
&lt;p&gt;获取所有 id=&amp;quot;test&amp;quot; 的所有文本内容&lt;/p&gt;
&lt;p&gt;xpath(&#39;//*[@id=&amp;quot;test&amp;quot;]//text()&#39;)&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;5-匹配不包含某个属性的标签-not&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#5-匹配不包含某个属性的标签-not&#34;&gt;#&lt;/a&gt; 5. 匹配不包含某个属性的标签 not&lt;/h4&gt;
&lt;p&gt;多用于表格中匹配中不包含表头信息的数据&lt;/p&gt;
&lt;p&gt;例：xpath (&#39;//table/tr [not (@class=&amp;quot;tbhead&amp;quot;)]&#39;)&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;6-匹配包含多个属性的标签-and&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#6-匹配包含多个属性的标签-and&#34;&gt;#&lt;/a&gt; 6. 匹配包含多个属性的标签: and&lt;/h4&gt;
&lt;p&gt;匹配所有的 tr 中不包含 tbhead 属性 和包含 head 的 tr 标签&lt;/p&gt;
&lt;p&gt;xpath(&#39;//table/tr[not(@class=&amp;quot;tbhead&amp;quot;) and @class=&amp;quot;head&amp;quot;]&#39;)&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;7-匹配包含不同属性的名称相同的标签-or&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#7-匹配包含不同属性的名称相同的标签-or&#34;&gt;#&lt;/a&gt; 7. 匹配包含不同属性的名称相同的标签: or&lt;/h4&gt;
&lt;p&gt;匹配包含 class=&amp;quot;speedbar&amp;quot; 或者 class=&amp;quot;content-wrap&amp;quot; 的标签&lt;/p&gt;
&lt;p&gt;例：xpath（&#39;//div [@class=&amp;quot;speedbar&amp;quot; or @class=&amp;quot;content-wrap&amp;quot;]&#39;）&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;8-将对象还原为字符串etreetostring&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#8-将对象还原为字符串etreetostring&#34;&gt;#&lt;/a&gt; 8. 将对象还原为字符串：etree.tostring（）&lt;/h4&gt;
&lt;p&gt;将匹配到的对象，作为 etree.tostring（）的参数即可， 注： 返回字符串&lt;/p&gt;
&lt;p&gt;sObj = xml.xpath (&#39;//*[@id=&amp;quot;test&amp;quot;]&#39;)[0] #使用 xpath 定位一个节点&lt;/p&gt;
&lt;p&gt;sStr = etree.tostring(sObj)&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;9按轴axes匹配&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#9按轴axes匹配&#34;&gt;#&lt;/a&gt; 9. 按轴 (Axes) 匹配&lt;/h4&gt;
&lt;h5 id=&#34;91-选取当前节点的所有子元素-child&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#91-选取当前节点的所有子元素-child&#34;&gt;#&lt;/a&gt; 9.1 选取当前节点的所有子元素: child&lt;/h5&gt;
&lt;p&gt;获取 div 下的 tr 的标签&lt;/p&gt;
&lt;p&gt;例：xpath (&#39;//div [@id=&amp;quot;testid&amp;quot;]/child::tr/td/text ()&#39;) # 感觉这种方法鸡肋， //div [@id=&amp;quot;testid&amp;quot;]//tr/td 也可以实现&lt;/p&gt;
&lt;h5 id=&#34;92-选取当前节点的所有属性attribute&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#92-选取当前节点的所有属性attribute&#34;&gt;#&lt;/a&gt; 9.2 选取当前节点的所有属性：attribute&lt;/h5&gt;
&lt;p&gt;获取 div 标签所有的属性值&lt;/p&gt;
&lt;p&gt;例： xpath (&#39;//div/attribute::&lt;em&gt;&#39;) # 感觉这种方法鸡肋，//div/@&lt;/em&gt; 同样能实现&lt;/p&gt;
&lt;h5 id=&#34;93-ancestor父辈元素-ancestor-or-self父辈元素及当前元素&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#93-ancestor父辈元素-ancestor-or-self父辈元素及当前元素&#34;&gt;#&lt;/a&gt; 9.3 ancestor：父辈元素 /ancestor-or-self：父辈元素及当前元素&lt;/h5&gt;
&lt;p&gt;获取父辈元素的 div 的所有属性值， 在不好定位的情况下，通过孩子标签定位，这种方法可以用&lt;/p&gt;
&lt;p&gt;xpath(&#39;//div[@id=&amp;quot;test&amp;quot;]/ancestor::div/@*&#39;)&lt;/p&gt;
&lt;p&gt;xpath(&#39;//div[@id=&amp;quot;test&amp;quot;]/ancestor-or-self::div/@*&#39;)&lt;/p&gt;
&lt;h5 id=&#34;94-descendant后代-descendant-or-self后代及当前节点本身&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#94-descendant后代-descendant-or-self后代及当前节点本身&#34;&gt;#&lt;/a&gt; 9.4 descendant：后代 /descendant-or-self：后代及当前节点本身&lt;/h5&gt;
&lt;p&gt;获取孩子元素的 div 的所有属性值，感觉鸡肋&lt;/p&gt;
&lt;p&gt;xpath(&#39;//div[@id=&amp;quot;test&amp;quot;]/descendant::div/@*&#39;)&lt;/p&gt;
&lt;p&gt;xpath(&#39;//div[@id=&amp;quot;test&amp;quot;]/descendant-or-self::div/@*&#39;)&lt;/p&gt;
&lt;h5 id=&#34;95-选取当前节点的所有命名空间节点namespace&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#95-选取当前节点的所有命名空间节点namespace&#34;&gt;#&lt;/a&gt; 9.5 选取当前节点的所有命名空间节点:namespace&lt;/h5&gt;
&lt;p&gt;xpath(&#39;//div[@id=&amp;quot;test&amp;quot;]/namespace:😗&#39;)&lt;/p&gt;
&lt;h5 id=&#34;96-定位position&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#96-定位position&#34;&gt;#&lt;/a&gt; 9.6 定位:position&lt;/h5&gt;
&lt;p&gt;和通过下标定位一样， 方法鸡肋&lt;/p&gt;
&lt;p&gt;xpath(&#39;//*[@id=&amp;quot;test&amp;quot;]/ol/li[position()=2]/text()&#39;)&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;10xpath-函数&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#10xpath-函数&#34;&gt;#&lt;/a&gt; 10.Xpath 函数：&lt;/h4&gt;
&lt;h5 id=&#34;101统计数量count&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#101统计数量count&#34;&gt;#&lt;/a&gt; 10.1 统计数量：count&lt;/h5&gt;
&lt;p&gt;统计符合要求节点的数量， 注： 返回字符串&lt;/p&gt;
&lt;p&gt;xpath(&#39;count(//tr[@info])&#39;)&lt;/p&gt;
&lt;h5 id=&#34;102字符串拼接-concat&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#102字符串拼接-concat&#34;&gt;#&lt;/a&gt; 10.2 字符串拼接 ：concat&lt;/h5&gt;
&lt;p&gt;统计出来的两个内容的字符串进行 “+” 处理， 注： 返回字符串&lt;/p&gt;
&lt;p&gt;xpath(&#39;concat(//li[@id=&amp;quot;one&amp;quot;]/text(),//li[@id=&amp;quot;three&amp;quot;]/text())&#39;)&lt;/p&gt;
&lt;h5 id=&#34;103-解析当前节点下的字符string&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#103-解析当前节点下的字符string&#34;&gt;#&lt;/a&gt; 10.3 解析当前节点下的字符：string&lt;/h5&gt;
&lt;p&gt;string () 直解析匹配的第一个标签的值， 注： 返回字符串&lt;/p&gt;
&lt;p&gt;xpath(&#39;string(//tr)&#39;)&lt;/p&gt;
&lt;p&gt;element.xpath (&#39;string (.)&#39;) #获取 element 下的所有文本&lt;/p&gt;
&lt;h5 id=&#34;104-获取当前节点的节点名称-local-name&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#104-获取当前节点的节点名称-local-name&#34;&gt;#&lt;/a&gt; 10.4 获取当前节点的节点名称: local-name&lt;/h5&gt;
&lt;p&gt;返回当前属性的节点名称， 注： 返回字符串&lt;/p&gt;
&lt;p&gt;xpath(&#39;local-name(//*[@id=&amp;quot;test&amp;quot;])&#39;)&lt;/p&gt;
&lt;h5 id=&#34;105-以指定的字符开头starts-with&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#105-以指定的字符开头starts-with&#34;&gt;#&lt;/a&gt; 10.5 以指定的字符开头：starts-with&lt;/h5&gt;
&lt;p&gt;starts-with 定位属性值以 8 开头的 li 元素&lt;/p&gt;
&lt;p&gt;xpath(&#39;//tr[starts-with(@code,&amp;quot;one&amp;quot;)]/text()&#39;)&lt;/p&gt;
&lt;h5 id=&#34;106-小于&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#106-小于&#34;&gt;#&lt;/a&gt; 10.6 小于：&amp;lt;&lt;/h5&gt;
&lt;p&gt;匹配所有 tr 标签属性 info 小于 200 的内容&lt;/p&gt;
&lt;p&gt;xpath(&#39;//tr[@info&amp;lt;200]/text()&#39;)&lt;/p&gt;
&lt;h5 id=&#34;107-查看元素是否存在boolean&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#107-查看元素是否存在boolean&#34;&gt;#&lt;/a&gt; 10.7 查看元素是否存在：boolean&lt;/h5&gt;
&lt;p&gt;boolean(./td[1]/img)&lt;/p&gt;
&lt;hr /&gt;
&lt;h5 id=&#34;11-根据指定的文本内容选择&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#11-根据指定的文本内容选择&#34;&gt;#&lt;/a&gt; 11. 根据指定的文本内容选择&lt;/h5&gt;
&lt;h5 id=&#34;111-相对定位指定的文本内容可以是文本内容的部分-也可以是全部&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#111-相对定位指定的文本内容可以是文本内容的部分-也可以是全部&#34;&gt;#&lt;/a&gt; 11.1 相对定位，指定的文本内容可以是文本内容的部分， 也可以是全部&lt;/h5&gt;
&lt;p&gt;//div [2]/ul/li [contains (text (), &amp;quot;指定的文本内容&amp;quot;)]/span/text ()&lt;/p&gt;
&lt;h5 id=&#34;112-精准定位目标文本和搜索文本完全一致&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#112-精准定位目标文本和搜索文本完全一致&#34;&gt;#&lt;/a&gt; 11.2 精准定位，目标文本和搜索文本完全一致&lt;/h5&gt;
&lt;p&gt;//div [2]/ul/li [text ()=&amp;quot;指定的文本内容&amp;quot;]/span/text ()&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;12-通过文本内容定位兄弟标签的文本内容&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#12-通过文本内容定位兄弟标签的文本内容&#34;&gt;#&lt;/a&gt; 12. 通过文本内容定位兄弟标签的文本内容&lt;/h4&gt;
&lt;p&gt;//span [@class=&#39;tbtitem&#39; and text ()=&#39; 使用语言：&#39;]/following-sibling::text ()&lt;/p&gt;
&lt;figure class=&#34;highlight html&#34;&gt;&lt;figcaption data-lang=&#34;HTML&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;// 定位【英语】&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;lt;&lt;/span&gt;span&lt;/span&gt; &lt;span class=&#34;token attr-name&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;token attr-value&#34;&gt;&lt;span class=&#34;token punctuation attr-equals&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&#34;&lt;/span&gt;tbtitem ys&lt;span class=&#34;token punctuation&#34;&gt;&#34;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    页数：&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;lt;/&lt;/span&gt;span&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;3\r\n &lt;span class=&#34;token entity named-entity&#34; title=&#34;&amp;nbsp;&#34;&gt;&amp;amp;nbsp;&lt;/span&gt;&lt;span class=&#34;token entity named-entity&#34; title=&#34;&amp;nbsp;&#34;&gt;&amp;amp;nbsp;&lt;/span&gt;\r\n&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;lt;&lt;/span&gt;span&lt;/span&gt; &lt;span class=&#34;token attr-name&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;token attr-value&#34;&gt;&lt;span class=&#34;token punctuation attr-equals&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&#34;&lt;/span&gt;tbtitem&lt;span class=&#34;token punctuation&#34;&gt;&#34;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    使用语言：&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;lt;/&lt;/span&gt;span&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;英语 \r\n\t\t&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token tag&#34;&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;em&gt;注： 以上内容， 除标注外， 均返回列表！！&lt;/em&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;13-position定位&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#13-position定位&#34;&gt;#&lt;/a&gt; 13. position：定位&lt;/h4&gt;
&lt;p&gt;选择偶数项：td [position ()=(position () mod 2 = 0)]&lt;/p&gt;
&lt;p&gt;选择奇数项：td [position ()=(position () mod 2 != 0)]&lt;/p&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;figcaption data-lang=&#34;python&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;driver&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;find_elements_by_xpath&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string-interpolation&#34;&gt;&lt;span class=&#34;token string&#34;&gt;f&#39;//td[contains(text(),&#34;核注清单&#34;)]/ancestor::tr/td[position()=(position() mod 2 != 0)]&#39;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;hr /&gt;
&lt;h4 id=&#34;14-查看元素的网页源码&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#14-查看元素的网页源码&#34;&gt;#&lt;/a&gt; 14. 查看元素的网页源码&lt;/h4&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;figcaption data-lang=&#34;python&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;a &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; html2&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;xpath&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;//table[@class=&#34;zebra&#34;]&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;etree&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;tostring&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; encoding&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;utf-8&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;decode&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;utf-8&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://sunforritual.github.io/yangxs.github.io/2024/03/01/python/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</guid>
            <title>定时任务</title>
            <link>https://sunforritual.github.io/yangxs.github.io/2024/03/01/python/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</link>
            <category term="python" scheme="https://sunforritual.github.io/yangxs.github.io/categories/python/" />
            <pubDate>Fri, 01 Mar 2024 11:01:23 +0800</pubDate>
            <description><![CDATA[ &lt;h4 id=&#34;1-schedule&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#1-schedule&#34;&gt;#&lt;/a&gt; 1 schedule&lt;/h4&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;figcaption data-lang=&#34;python&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; schedule&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; time&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;job&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token comment&#34;&gt;# 这里是你要执行的任务代码&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;执行任务&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 设定每天的特定时间，例如每天 23:59:59&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;schedule&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;every&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;day&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;at&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;23:59:59&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;do&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;job&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 每小时执行一次&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# schedule.every().hour.at(&#34;:00&#34;).do(job)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 每小时的 30 分钟，执行一次&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# schedule.every().hour.at(&#34;:30&#34;).do(job)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 循环调度任务&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;token boolean&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    schedule&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;run_pending&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    time&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;sleep&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h4 id=&#34;2-blockingscheduler推荐&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#2-blockingscheduler推荐&#34;&gt;#&lt;/a&gt; 2 BlockingScheduler（推荐）&lt;/h4&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;figcaption data-lang=&#34;python&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;from&lt;/span&gt; apscheduler&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;schedulers&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;blocking &lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; BlockingScheduler&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;job&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;定时任务执行了！&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;shanghai &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;Asia/Shanghai&#39;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 创建调度器&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;scheduler &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; BlockingScheduler&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;scheduler&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;configure&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;timezone&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;shanghai&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 添加定时任务，每 2 小时执行一次&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;scheduler&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;add_job&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;job&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;interval&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; hours&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 添加定时任务，每月 1 号凌晨 0 点执行&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;scheduler&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;add_job&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;job&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;cron&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; month&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;1&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; day&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;1&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; hour&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;0&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; minute&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;0&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; second&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#39;0&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 启动调度器&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;scheduler&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;start&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h5 id=&#34;参数说明&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#参数说明&#34;&gt;#&lt;/a&gt; 参数说明&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;weeks (int) – 隔多少周执行一次任务&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;days (int) – 隔多少天执行一次任务&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hours (int) – 隔多少个小时执行一次任务&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;minutes (int) – 隔几分钟执行一次任务&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;seconds (int) – 隔几秒执行一次任务&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;start_date - 指定开始时间 (datetime|str) – starting point for the interval calculation&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可以是 datetime 对象、date 对象、&amp;quot;% Y-% m-% d % H:% M:% S&amp;quot; 的字符串&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;end_date - 指定结束时间&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可以是 datetime 对象、date 对象、&amp;quot;% Y-% m-% d % H:% M:% S&amp;quot; 的字符串&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;timezone - 时区，中国就用 &#39;Asia/Shanghai&#39; 就行&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;jitter 时间偏移量，单位秒&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;在预定运行时间的基础上，加上一个随机的秒数&lt;/p&gt;
&lt;p&gt;例如 预定运行时间为 10:20:20 偏移量为 10 则真实运行时间期间为 [10:20:20-10:20:30]&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;形参说明&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#形参说明&#34;&gt;#&lt;/a&gt; 形参说明&lt;/h5&gt;
&lt;p&gt;如果要执行的任务需要参数，可以通过 scheduler.add_job (args=(a,b)) 进行添加&lt;/p&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;figcaption data-lang=&#34;python&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;job&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;定时任务执行了！&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;scheduler&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;add_job&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;job&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;interval&#39;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; arghours&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; ]]></description>
        </item>
    </channel>
</rss>
