{
    "version": "https://jsonfeed.org/version/1",
    "title": "(äºº â€¢Íˆá´—â€¢Íˆ) â™¡â™¡",
    "subtitle": "ä¸ç”¨æ‹…å¿ƒï¼Œè¿™æ¬¡è‚¯å®šä¸ä¼šæœ‰é—®é¢˜",
    "icon": "https://sunforritual.github.io/yangxs.github.io/images/favicon.ico",
    "description": "",
    "home_page_url": "https://sunforritual.github.io/yangxs.github.io",
    "items": [
        {
            "id": "https://sunforritual.github.io/yangxs.github.io/2024/03/01/spider/Xpath%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/",
            "url": "https://sunforritual.github.io/yangxs.github.io/2024/03/01/spider/Xpath%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/",
            "title": "xpath é«˜çº§ç”¨æ³•",
            "date_published": "2024-03-01T08:26:39.599Z",
            "content_html": "<h3 id=\"xpath-é«˜çº§ç”¨æ³•\"><a class=\"anchor\" href=\"#xpath-é«˜çº§ç”¨æ³•\">#</a> xpath é«˜çº§ç”¨æ³•</h3>\n<h4 id=\"1-åŒ¹é…å½“å‰èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰\"><a class=\"anchor\" href=\"#1-åŒ¹é…å½“å‰èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰\">#</a> 1. åŒ¹é…å½“å‰èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰ï¼š .//</h4>\n<p>. è¡¨ç¤ºå½“å‰</p>\n<p>// è¡¨ç¤ºå½“å‰æ ‡ç­¾ä¸‹çš„æ‰€æœ‰æ ‡ç­¾</p>\n<p>æ³¨ï¼š è¦é…åˆä½¿ç”¨</p>\n<hr />\n<h4 id=\"2-åŒ¹é…æŸæ ‡ç­¾çš„å±æ€§å€¼-å±æ€§åç§°\"><a class=\"anchor\" href=\"#2-åŒ¹é…æŸæ ‡ç­¾çš„å±æ€§å€¼-å±æ€§åç§°\">#</a> 2. åŒ¹é…æŸæ ‡ç­¾çš„å±æ€§å€¼ï¼š /@å±æ€§åç§°</h4>\n<p>è¿™é‡Œä»¥ input é‡Œçš„ value å€¼ä¸ºä¾‹ï¼š</p>\n<p>ä¾‹ï¼šxpath (//input/@value)</p>\n<hr />\n<h4 id=\"3-åŒ¹é…å¤šä¸ªè·¯å¾„\"><a class=\"anchor\" href=\"#3-åŒ¹é…å¤šä¸ªè·¯å¾„\">#</a> 3. åŒ¹é…å¤šä¸ªè·¯å¾„ï¼š|</h4>\n<p>åœ¨ä¸€ä¸ª xpath ä¸­å†™çš„å¤šä¸ªè¡¨è¾¾å¼ç”¨ | åˆ†å¼€ï¼Œ æ¯ä¸ªè¡¨è¾¾å¼äº’ä¸å¹²æ‰°ã€‚</p>\n<p>ä¾‹ï¼šxpath (&quot;//tr [6]/td [2]/text () | //tr [7]/td [2]/text ()&quot;)</p>\n<hr />\n<h4 id=\"4æŒ‰å±æ€§åŒ¹é…\"><a class=\"anchor\" href=\"#4æŒ‰å±æ€§åŒ¹é…\">#</a> 4. æŒ‰å±æ€§åŒ¹é…ï¼š@</h4>\n<p>è·å–æ‰€æœ‰ id=&quot;test&quot; çš„æ‰€æœ‰æ–‡æœ¬å†…å®¹</p>\n<p>xpath('//*[@id=&quot;test&quot;]//text()')</p>\n<hr />\n<h4 id=\"5-åŒ¹é…ä¸åŒ…å«æŸä¸ªå±æ€§çš„æ ‡ç­¾-not\"><a class=\"anchor\" href=\"#5-åŒ¹é…ä¸åŒ…å«æŸä¸ªå±æ€§çš„æ ‡ç­¾-not\">#</a> 5. åŒ¹é…ä¸åŒ…å«æŸä¸ªå±æ€§çš„æ ‡ç­¾ not</h4>\n<p>å¤šç”¨äºè¡¨æ ¼ä¸­åŒ¹é…ä¸­ä¸åŒ…å«è¡¨å¤´ä¿¡æ¯çš„æ•°æ®</p>\n<p>ä¾‹ï¼šxpath ('//table/tr [not (@class=&quot;tbhead&quot;)]')</p>\n<hr />\n<h4 id=\"6-åŒ¹é…åŒ…å«å¤šä¸ªå±æ€§çš„æ ‡ç­¾-and\"><a class=\"anchor\" href=\"#6-åŒ¹é…åŒ…å«å¤šä¸ªå±æ€§çš„æ ‡ç­¾-and\">#</a> 6. åŒ¹é…åŒ…å«å¤šä¸ªå±æ€§çš„æ ‡ç­¾: and</h4>\n<p>åŒ¹é…æ‰€æœ‰çš„ tr ä¸­ä¸åŒ…å« tbhead å±æ€§ å’ŒåŒ…å« head çš„ tr æ ‡ç­¾</p>\n<p>xpath('//table/tr[not(@class=&quot;tbhead&quot;) and @class=&quot;head&quot;]')</p>\n<hr />\n<h4 id=\"7-åŒ¹é…åŒ…å«ä¸åŒå±æ€§çš„åç§°ç›¸åŒçš„æ ‡ç­¾-or\"><a class=\"anchor\" href=\"#7-åŒ¹é…åŒ…å«ä¸åŒå±æ€§çš„åç§°ç›¸åŒçš„æ ‡ç­¾-or\">#</a> 7. åŒ¹é…åŒ…å«ä¸åŒå±æ€§çš„åç§°ç›¸åŒçš„æ ‡ç­¾: or</h4>\n<p>åŒ¹é…åŒ…å« class=&quot;speedbar&quot; æˆ–è€… class=&quot;content-wrap&quot; çš„æ ‡ç­¾</p>\n<p>ä¾‹ï¼šxpathï¼ˆ'//div [@class=&quot;speedbar&quot; or @class=&quot;content-wrap&quot;]'ï¼‰</p>\n<hr />\n<h4 id=\"8-å°†å¯¹è±¡è¿˜åŸä¸ºå­—ç¬¦ä¸²etreetostring\"><a class=\"anchor\" href=\"#8-å°†å¯¹è±¡è¿˜åŸä¸ºå­—ç¬¦ä¸²etreetostring\">#</a> 8. å°†å¯¹è±¡è¿˜åŸä¸ºå­—ç¬¦ä¸²ï¼šetree.tostringï¼ˆï¼‰</h4>\n<p>å°†åŒ¹é…åˆ°çš„å¯¹è±¡ï¼Œä½œä¸º etree.tostringï¼ˆï¼‰çš„å‚æ•°å³å¯ï¼Œ æ³¨ï¼š è¿”å›å­—ç¬¦ä¸²</p>\n<p>sObj = xml.xpath ('//*[@id=&quot;test&quot;]')[0] #ä½¿ç”¨ xpath å®šä½ä¸€ä¸ªèŠ‚ç‚¹</p>\n<p>sStr = etree.tostring(sObj)</p>\n<hr />\n<h4 id=\"9æŒ‰è½´axesåŒ¹é…\"><a class=\"anchor\" href=\"#9æŒ‰è½´axesåŒ¹é…\">#</a> 9. æŒ‰è½´ (Axes) åŒ¹é…</h4>\n<h5 id=\"91-é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­å…ƒç´ -child\"><a class=\"anchor\" href=\"#91-é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­å…ƒç´ -child\">#</a> 9.1 é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­å…ƒç´ : child</h5>\n<p>è·å– div ä¸‹çš„ tr çš„æ ‡ç­¾</p>\n<p>ä¾‹ï¼šxpath ('//div [@id=&quot;testid&quot;]/child::tr/td/text ()') # æ„Ÿè§‰è¿™ç§æ–¹æ³•é¸¡è‚‹ï¼Œ //div [@id=&quot;testid&quot;]//tr/td ä¹Ÿå¯ä»¥å®ç°</p>\n<h5 id=\"92-é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§attribute\"><a class=\"anchor\" href=\"#92-é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§attribute\">#</a> 9.2 é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§ï¼šattribute</h5>\n<p>è·å– div æ ‡ç­¾æ‰€æœ‰çš„å±æ€§å€¼</p>\n<p>ä¾‹ï¼š xpath ('//div/attribute::<em>') # æ„Ÿè§‰è¿™ç§æ–¹æ³•é¸¡è‚‹ï¼Œ//div/@</em> åŒæ ·èƒ½å®ç°</p>\n<h5 id=\"93-ancestorçˆ¶è¾ˆå…ƒç´ -ancestor-or-selfçˆ¶è¾ˆå…ƒç´ åŠå½“å‰å…ƒç´ \"><a class=\"anchor\" href=\"#93-ancestorçˆ¶è¾ˆå…ƒç´ -ancestor-or-selfçˆ¶è¾ˆå…ƒç´ åŠå½“å‰å…ƒç´ \">#</a> 9.3 ancestorï¼šçˆ¶è¾ˆå…ƒç´  /ancestor-or-selfï¼šçˆ¶è¾ˆå…ƒç´ åŠå½“å‰å…ƒç´ </h5>\n<p>è·å–çˆ¶è¾ˆå…ƒç´ çš„ div çš„æ‰€æœ‰å±æ€§å€¼ï¼Œ åœ¨ä¸å¥½å®šä½çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å­©å­æ ‡ç­¾å®šä½ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥ç”¨</p>\n<p>xpath('//div[@id=&quot;test&quot;]/ancestor::div/@*')</p>\n<p>xpath('//div[@id=&quot;test&quot;]/ancestor-or-self::div/@*')</p>\n<h5 id=\"94-descendantåä»£-descendant-or-selfåä»£åŠå½“å‰èŠ‚ç‚¹æœ¬èº«\"><a class=\"anchor\" href=\"#94-descendantåä»£-descendant-or-selfåä»£åŠå½“å‰èŠ‚ç‚¹æœ¬èº«\">#</a> 9.4 descendantï¼šåä»£ /descendant-or-selfï¼šåä»£åŠå½“å‰èŠ‚ç‚¹æœ¬èº«</h5>\n<p>è·å–å­©å­å…ƒç´ çš„ div çš„æ‰€æœ‰å±æ€§å€¼ï¼Œæ„Ÿè§‰é¸¡è‚‹</p>\n<p>xpath('//div[@id=&quot;test&quot;]/descendant::div/@*')</p>\n<p>xpath('//div[@id=&quot;test&quot;]/descendant-or-self::div/@*')</p>\n<h5 id=\"95-é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å‘½åç©ºé—´èŠ‚ç‚¹namespace\"><a class=\"anchor\" href=\"#95-é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å‘½åç©ºé—´èŠ‚ç‚¹namespace\">#</a> 9.5 é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å‘½åç©ºé—´èŠ‚ç‚¹:namespace</h5>\n<p>xpath('//div[@id=&quot;test&quot;]/namespace:ğŸ˜—')</p>\n<h5 id=\"96-å®šä½position\"><a class=\"anchor\" href=\"#96-å®šä½position\">#</a> 9.6 å®šä½:position</h5>\n<p>å’Œé€šè¿‡ä¸‹æ ‡å®šä½ä¸€æ ·ï¼Œ æ–¹æ³•é¸¡è‚‹</p>\n<p>xpath('//*[@id=&quot;test&quot;]/ol/li[position()=2]/text()')</p>\n<hr />\n<h4 id=\"10xpath-å‡½æ•°\"><a class=\"anchor\" href=\"#10xpath-å‡½æ•°\">#</a> 10.Xpath å‡½æ•°ï¼š</h4>\n<h5 id=\"101ç»Ÿè®¡æ•°é‡count\"><a class=\"anchor\" href=\"#101ç»Ÿè®¡æ•°é‡count\">#</a> 10.1 ç»Ÿè®¡æ•°é‡ï¼šcount</h5>\n<p>ç»Ÿè®¡ç¬¦åˆè¦æ±‚èŠ‚ç‚¹çš„æ•°é‡ï¼Œ æ³¨ï¼š è¿”å›å­—ç¬¦ä¸²</p>\n<p>xpath('count(//tr[@info])')</p>\n<h5 id=\"102å­—ç¬¦ä¸²æ‹¼æ¥-concat\"><a class=\"anchor\" href=\"#102å­—ç¬¦ä¸²æ‹¼æ¥-concat\">#</a> 10.2 å­—ç¬¦ä¸²æ‹¼æ¥ ï¼šconcat</h5>\n<p>ç»Ÿè®¡å‡ºæ¥çš„ä¸¤ä¸ªå†…å®¹çš„å­—ç¬¦ä¸²è¿›è¡Œ â€œ+â€ å¤„ç†ï¼Œ æ³¨ï¼š è¿”å›å­—ç¬¦ä¸²</p>\n<p>xpath('concat(//li[@id=&quot;one&quot;]/text(),//li[@id=&quot;three&quot;]/text())')</p>\n<h5 id=\"103-è§£æå½“å‰èŠ‚ç‚¹ä¸‹çš„å­—ç¬¦string\"><a class=\"anchor\" href=\"#103-è§£æå½“å‰èŠ‚ç‚¹ä¸‹çš„å­—ç¬¦string\">#</a> 10.3 è§£æå½“å‰èŠ‚ç‚¹ä¸‹çš„å­—ç¬¦ï¼šstring</h5>\n<p>string () ç›´è§£æåŒ¹é…çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾çš„å€¼ï¼Œ æ³¨ï¼š è¿”å›å­—ç¬¦ä¸²</p>\n<p>xpath('string(//tr)')</p>\n<p>element.xpath ('string (.)') #è·å– element ä¸‹çš„æ‰€æœ‰æ–‡æœ¬</p>\n<h5 id=\"104-è·å–å½“å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹åç§°-local-name\"><a class=\"anchor\" href=\"#104-è·å–å½“å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹åç§°-local-name\">#</a> 10.4 è·å–å½“å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹åç§°: local-name</h5>\n<p>è¿”å›å½“å‰å±æ€§çš„èŠ‚ç‚¹åç§°ï¼Œ æ³¨ï¼š è¿”å›å­—ç¬¦ä¸²</p>\n<p>xpath('local-name(//*[@id=&quot;test&quot;])')</p>\n<h5 id=\"105-ä»¥æŒ‡å®šçš„å­—ç¬¦å¼€å¤´starts-with\"><a class=\"anchor\" href=\"#105-ä»¥æŒ‡å®šçš„å­—ç¬¦å¼€å¤´starts-with\">#</a> 10.5 ä»¥æŒ‡å®šçš„å­—ç¬¦å¼€å¤´ï¼šstarts-with</h5>\n<p>starts-with å®šä½å±æ€§å€¼ä»¥ 8 å¼€å¤´çš„ li å…ƒç´ </p>\n<p>xpath('//tr[starts-with(@code,&quot;one&quot;)]/text()')</p>\n<h5 id=\"106-å°äº\"><a class=\"anchor\" href=\"#106-å°äº\">#</a> 10.6 å°äºï¼š&lt;</h5>\n<p>åŒ¹é…æ‰€æœ‰ tr æ ‡ç­¾å±æ€§ info å°äº 200 çš„å†…å®¹</p>\n<p>xpath('//tr[@info&lt;200]/text()')</p>\n<h5 id=\"107-æŸ¥çœ‹å…ƒç´ æ˜¯å¦å­˜åœ¨boolean\"><a class=\"anchor\" href=\"#107-æŸ¥çœ‹å…ƒç´ æ˜¯å¦å­˜åœ¨boolean\">#</a> 10.7 æŸ¥çœ‹å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼šboolean</h5>\n<p>boolean(./td[1]/img)</p>\n<hr />\n<h5 id=\"11-æ ¹æ®æŒ‡å®šçš„æ–‡æœ¬å†…å®¹é€‰æ‹©\"><a class=\"anchor\" href=\"#11-æ ¹æ®æŒ‡å®šçš„æ–‡æœ¬å†…å®¹é€‰æ‹©\">#</a> 11. æ ¹æ®æŒ‡å®šçš„æ–‡æœ¬å†…å®¹é€‰æ‹©</h5>\n<h5 id=\"111-ç›¸å¯¹å®šä½æŒ‡å®šçš„æ–‡æœ¬å†…å®¹å¯ä»¥æ˜¯æ–‡æœ¬å†…å®¹çš„éƒ¨åˆ†-ä¹Ÿå¯ä»¥æ˜¯å…¨éƒ¨\"><a class=\"anchor\" href=\"#111-ç›¸å¯¹å®šä½æŒ‡å®šçš„æ–‡æœ¬å†…å®¹å¯ä»¥æ˜¯æ–‡æœ¬å†…å®¹çš„éƒ¨åˆ†-ä¹Ÿå¯ä»¥æ˜¯å…¨éƒ¨\">#</a> 11.1 ç›¸å¯¹å®šä½ï¼ŒæŒ‡å®šçš„æ–‡æœ¬å†…å®¹å¯ä»¥æ˜¯æ–‡æœ¬å†…å®¹çš„éƒ¨åˆ†ï¼Œ ä¹Ÿå¯ä»¥æ˜¯å…¨éƒ¨</h5>\n<p>//div [2]/ul/li [contains (text (), &quot;æŒ‡å®šçš„æ–‡æœ¬å†…å®¹&quot;)]/span/text ()</p>\n<h5 id=\"112-ç²¾å‡†å®šä½ç›®æ ‡æ–‡æœ¬å’Œæœç´¢æ–‡æœ¬å®Œå…¨ä¸€è‡´\"><a class=\"anchor\" href=\"#112-ç²¾å‡†å®šä½ç›®æ ‡æ–‡æœ¬å’Œæœç´¢æ–‡æœ¬å®Œå…¨ä¸€è‡´\">#</a> 11.2 ç²¾å‡†å®šä½ï¼Œç›®æ ‡æ–‡æœ¬å’Œæœç´¢æ–‡æœ¬å®Œå…¨ä¸€è‡´</h5>\n<p>//div [2]/ul/li [text ()=&quot;æŒ‡å®šçš„æ–‡æœ¬å†…å®¹&quot;]/span/text ()</p>\n<hr />\n<h4 id=\"12-é€šè¿‡æ–‡æœ¬å†…å®¹å®šä½å…„å¼Ÿæ ‡ç­¾çš„æ–‡æœ¬å†…å®¹\"><a class=\"anchor\" href=\"#12-é€šè¿‡æ–‡æœ¬å†…å®¹å®šä½å…„å¼Ÿæ ‡ç­¾çš„æ–‡æœ¬å†…å®¹\">#</a> 12. é€šè¿‡æ–‡æœ¬å†…å®¹å®šä½å…„å¼Ÿæ ‡ç­¾çš„æ–‡æœ¬å†…å®¹</h4>\n<p>//span [@class='tbtitem' and text ()=' ä½¿ç”¨è¯­è¨€ï¼š']/following-sibling::text ()</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>// å®šä½ã€è‹±è¯­ã€‘</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tbtitem ys<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    é¡µæ•°ï¼š</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>3\\r\\n <span class=\"token entity named-entity\" title=\"&nbsp;\">&amp;nbsp;</span><span class=\"token entity named-entity\" title=\"&nbsp;\">&amp;nbsp;</span>\\r\\n</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tbtitem<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    ä½¿ç”¨è¯­è¨€ï¼š</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>è‹±è¯­ \\r\\n\\t\\t</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><em>æ³¨ï¼š ä»¥ä¸Šå†…å®¹ï¼Œ é™¤æ ‡æ³¨å¤–ï¼Œ å‡è¿”å›åˆ—è¡¨ï¼ï¼</em></p>\n<hr />\n<h4 id=\"13-positionå®šä½\"><a class=\"anchor\" href=\"#13-positionå®šä½\">#</a> 13. positionï¼šå®šä½</h4>\n<p>é€‰æ‹©å¶æ•°é¡¹ï¼štd [position ()=(position () mod 2 = 0)]</p>\n<p>é€‰æ‹©å¥‡æ•°é¡¹ï¼štd [position ()=(position () mod 2 != 0)]</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>driver<span class=\"token punctuation\">.</span>find_elements_by_xpath<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'//td[contains(text(),\"æ ¸æ³¨æ¸…å•\")]/ancestor::tr/td[position()=(position() mod 2 != 0)]'</span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><hr />\n<h4 id=\"14-æŸ¥çœ‹å…ƒç´ çš„ç½‘é¡µæºç \"><a class=\"anchor\" href=\"#14-æŸ¥çœ‹å…ƒç´ çš„ç½‘é¡µæºç \">#</a> 14. æŸ¥çœ‹å…ƒç´ çš„ç½‘é¡µæºç </h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>a <span class=\"token operator\">=</span> html2<span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'//table[@class=\"zebra\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>etree<span class=\"token punctuation\">.</span>tostring<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure>",
            "tags": [
                "spider"
            ]
        },
        {
            "id": "https://sunforritual.github.io/yangxs.github.io/2024/03/01/python/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/",
            "url": "https://sunforritual.github.io/yangxs.github.io/2024/03/01/python/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/",
            "title": "å®šæ—¶ä»»åŠ¡",
            "date_published": "2024-03-01T03:01:23.053Z",
            "content_html": "<h4 id=\"1-schedule\"><a class=\"anchor\" href=\"#1-schedule\">#</a> 1 schedule</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> schedule</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> time</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">job</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\"># è¿™é‡Œæ˜¯ä½ è¦æ‰§è¡Œçš„ä»»åŠ¡ä»£ç </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ‰§è¡Œä»»åŠ¡\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># è®¾å®šæ¯å¤©çš„ç‰¹å®šæ—¶é—´ï¼Œä¾‹å¦‚æ¯å¤© 23:59:59</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>schedule<span class=\"token punctuation\">.</span>every<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>day<span class=\"token punctuation\">.</span>at<span class=\"token punctuation\">(</span><span class=\"token string\">\"23:59:59\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>do<span class=\"token punctuation\">(</span>job<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># schedule.every().hour.at(\":00\").do(job)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># æ¯å°æ—¶çš„ 30 åˆ†é’Ÿï¼Œæ‰§è¡Œä¸€æ¬¡</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># schedule.every().hour.at(\":30\").do(job)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># å¾ªç¯è°ƒåº¦ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    schedule<span class=\"token punctuation\">.</span>run_pending<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"2-blockingscheduleræ¨è\"><a class=\"anchor\" href=\"#2-blockingscheduleræ¨è\">#</a> 2 BlockingSchedulerï¼ˆæ¨èï¼‰</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> apscheduler<span class=\"token punctuation\">.</span>schedulers<span class=\"token punctuation\">.</span>blocking <span class=\"token keyword\">import</span> BlockingScheduler</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">job</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å®šæ—¶ä»»åŠ¡æ‰§è¡Œäº†ï¼\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>shanghai <span class=\"token operator\">=</span> <span class=\"token string\">'Asia/Shanghai'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºè°ƒåº¦å™¨</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>scheduler <span class=\"token operator\">=</span> BlockingScheduler<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>scheduler<span class=\"token punctuation\">.</span>configure<span class=\"token punctuation\">(</span>timezone<span class=\"token operator\">=</span>shanghai<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼Œæ¯ 2 å°æ—¶æ‰§è¡Œä¸€æ¬¡</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>scheduler<span class=\"token punctuation\">.</span>add_job<span class=\"token punctuation\">(</span>job<span class=\"token punctuation\">,</span> <span class=\"token string\">'interval'</span><span class=\"token punctuation\">,</span> hours<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼Œæ¯æœˆ 1 å·å‡Œæ™¨ 0 ç‚¹æ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>scheduler<span class=\"token punctuation\">.</span>add_job<span class=\"token punctuation\">(</span>job<span class=\"token punctuation\">,</span> <span class=\"token string\">'cron'</span><span class=\"token punctuation\">,</span> month<span class=\"token operator\">=</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> day<span class=\"token operator\">=</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> hour<span class=\"token operator\">=</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span> minute<span class=\"token operator\">=</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span> second<span class=\"token operator\">=</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># å¯åŠ¨è°ƒåº¦å™¨</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>scheduler<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h5 id=\"å‚æ•°è¯´æ˜\"><a class=\"anchor\" href=\"#å‚æ•°è¯´æ˜\">#</a> å‚æ•°è¯´æ˜</h5>\n<ul>\n<li>\n<p>weeks (int) â€“ éš”å¤šå°‘å‘¨æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡</p>\n</li>\n<li>\n<p>days (int) â€“ éš”å¤šå°‘å¤©æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡</p>\n</li>\n<li>\n<p>hours (int) â€“ éš”å¤šå°‘ä¸ªå°æ—¶æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡</p>\n</li>\n<li>\n<p>minutes (int) â€“ éš”å‡ åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡</p>\n</li>\n<li>\n<p>seconds (int) â€“ éš”å‡ ç§’æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡</p>\n</li>\n<li>\n<p>start_date - æŒ‡å®šå¼€å§‹æ—¶é—´ (datetime|str) â€“ starting point for the interval calculation</p>\n<ul>\n<li>å¯ä»¥æ˜¯ datetime å¯¹è±¡ã€date å¯¹è±¡ã€&quot;% Y-% m-% d % H:% M:% S&quot; çš„å­—ç¬¦ä¸²</li>\n</ul>\n</li>\n<li>\n<p>end_date - æŒ‡å®šç»“æŸæ—¶é—´</p>\n<ul>\n<li>å¯ä»¥æ˜¯ datetime å¯¹è±¡ã€date å¯¹è±¡ã€&quot;% Y-% m-% d % H:% M:% S&quot; çš„å­—ç¬¦ä¸²</li>\n</ul>\n</li>\n<li>\n<p>timezone - æ—¶åŒºï¼Œä¸­å›½å°±ç”¨ 'Asia/Shanghai' å°±è¡Œ</p>\n</li>\n<li>\n<p>jitter æ—¶é—´åç§»é‡ï¼Œå•ä½ç§’</p>\n<ul>\n<li>\n<p>åœ¨é¢„å®šè¿è¡Œæ—¶é—´çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šä¸€ä¸ªéšæœºçš„ç§’æ•°</p>\n<p>ä¾‹å¦‚ é¢„å®šè¿è¡Œæ—¶é—´ä¸º 10:20:20 åç§»é‡ä¸º 10 åˆ™çœŸå®è¿è¡Œæ—¶é—´æœŸé—´ä¸º [10:20:20-10:20:30]</p>\n</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"å½¢å‚è¯´æ˜\"><a class=\"anchor\" href=\"#å½¢å‚è¯´æ˜\">#</a> å½¢å‚è¯´æ˜</h5>\n<p>å¦‚æœè¦æ‰§è¡Œçš„ä»»åŠ¡éœ€è¦å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ scheduler.add_job (args=(a,b)) è¿›è¡Œæ·»åŠ </p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">job</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å®šæ—¶ä»»åŠ¡æ‰§è¡Œäº†ï¼\"</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>scheduler<span class=\"token punctuation\">.</span>add_job<span class=\"token punctuation\">(</span>job<span class=\"token punctuation\">,</span> <span class=\"token string\">'interval'</span><span class=\"token punctuation\">,</span> arghours<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr></table></figure>",
            "tags": [
                "python"
            ]
        }
    ]
}